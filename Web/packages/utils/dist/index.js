const t=function(t){return"[object Object]"===Object.prototype.toString.call(t)},o=function(t){return"function"==typeof t},i=function(){return!!window.navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)},e="undefined"!=typeof window;let n=!1;const s={name:"",opacity:1,left:"",top:"",safeBottom:0},d={mounted(t,o){t.config={...s,...o.value},t.dokitEntryLastX=9999,t.dokitEntryLastY=9999,t.style.position="fixed",t.style.opacity=t.config.opacity,t.dokitPositionLeft=function(t){let o=t.config.left||Math.round(window.innerWidth/2);return localStorage.getItem(`dokitPositionLeft_${t.config.name}`)?parseInt(localStorage.getItem(`dokitPositionLeft_${t.config.name}`)):o}(t),t.dokitPositionTop=function(t){let o=t.config.top||Math.round(window.innerHeight/2);return localStorage.getItem(`dokitPositionTop_${t.config.name}`)?parseInt(localStorage.getItem(`dokitPositionTop_${t.config.name}`)):o}(t),t.style.top=`${t.dokitPositionTop}px`,t.style.left=`${t.dokitPositionLeft}px`,f(t),t.ontouchstart=()=>{r(t)},t.ontouchmove=o=>{o.preventDefault(),c(t,o)},t.ontouchend=o=>{a(t)},t.onmousedown=o=>{o.preventDefault(),r(t),n=!0},window.addEventListener("mousemove",(o=>{n&&c(t,o)})),window.addEventListener("mouseup",(o=>{n&&(a(t),n=!1)})),window.addEventListener("resize",(()=>{f(t)}))}};function r(t){t.style.opacity=1}function c(t,o){let i=o.touches?o.touches[0]:o;if(9999===t.dokitEntryLastX)return t.dokitEntryLastX=i.clientX,void(t.dokitEntryLastY=i.clientY);t.dokitPositionTop+=i.clientY-t.dokitEntryLastY,t.dokitPositionLeft+=i.clientX-t.dokitEntryLastX,t.dokitEntryLastX=i.clientX,t.dokitEntryLastY=i.clientY,t.style.top=`${t.dokitPositionTop}px`,t.style.left=`${t.dokitPositionLeft}px`}function a(t,o){setTimeout((()=>{f(t),t.config.name&&localStorage.setItem(`dokitPositionTop_${t.config.name}`,t.dokitPositionTop),t.config.name&&localStorage.setItem(`dokitPositionLeft_${t.config.name}`,t.dokitPositionLeft)}),100),t.dokitEntryLastX=9999,t.dokitEntryLastY=9999,t.style.opacity=t.config.opacity}function f(t){t.dokitPositionLeft<0?(t.dokitPositionLeft=0,t.style.left=`${t.dokitPositionLeft}px`):t.dokitPositionLeft+t.getBoundingClientRect().width>window.innerWidth&&(t.dokitPositionLeft=window.innerWidth-t.getBoundingClientRect().width,t.style.left=`${t.dokitPositionLeft}px`),t.dokitPositionTop<0?(t.dokitPositionTop=0,t.style.top=`${t.dokitPositionTop}px`):t.dokitPositionTop+t.getBoundingClientRect().height+t.config.safeBottom>window.innerHeight&&(t.dokitPositionTop=window.innerHeight-t.getBoundingClientRect().height-t.config.safeBottom,t.style.top=`${t.dokitPositionTop}px`)}class l{constructor(){this._events={}}once(t,o){let i=this,e=function(){o.apply(i,arguments),i.off(t,e)};return i.on(t,e),this}on(t,o){return this._events[t]=this._events[t]||[],this._events[t].push(o),this}off(t,o){if(!this._events[t]||0===this._events[t].length)return;let i=this._events[t].indexOf(o);i>0&&this._events[t].splice(i,1)}emit(t){if(this._events[t]&&0!==this._events[t].length){var o=arguments.slice(1);return this._events[t].forEach((t=>{t.apply(this,o)})),this}}}export{l as EventEmitter,d as dragable,e as inBrowser,o as isFunction,i as isMobile,t as isObject};
